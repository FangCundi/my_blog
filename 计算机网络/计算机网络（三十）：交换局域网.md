# 1、链路层寻址和ARP：

## ①、MAC地址：

不是主机或路由器具有链路层地址，而是它们的适配器(即网络接口)具有链路层地址。因此，具有多个网络接口的主机或路由器将具有与之相关联的多个链路层地址，就像它也具有与之相关联的多个IP地址一样
链路层地址有各种不同的称呼：LAN地址、物理地址或MAC地址。MAC 地址的一个有越性质是没有两块适配器具有相同的地址。
MAC地址长度为6字节，共有2^48^可能的MAC地址。MAC地址通常被设计为永久。MAC广播地址为 FF-FF-FF-FF-FF-FF。
**简单地讲，就是给路由器的每一个接口一个MAC地址，和IP地址很像，基本上一个IP地址对应于一个MAC地址？。**

## ②、地址解析协议ARP：

据本网内目的主机或默认网关的IP地址获取其MAC地址。
地址解析协议(ARP)的基本思想：在每一台主机中设置专用内存区域，称为ARP高速缓存(也称为ARP表)。存储该主机所在局域网中其他主机和路由器的IP地址与MAC地址的映射关系。
地址解析协议(ARP)的基本步骤：
• ARP查询分组：通过一个广播帧发送的
• ARP响应分组：通过一个单播帧发送的
• ARP是即插即用的：一个ARP表是自动建立的，不需要系统管理员来配置。
**即在每一台主机中都有一个本地局域网的ARP表，通过这个表在已知主机IP地址的情况下可以得到局域网内其他主机或路由器的MAC地址。**

## ③、发送数据报到子网外：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200702232242518.png)
每台主机仅有一个IP地址和一个适配器，但是，一台路由器对它的每个接口都有一个IP地址。对路由器的每个接口，(在路由器中)也有一个ARP模块和一个适配器。上图中路由器有两个接口，所以它有两个IP地址、两个ARP模块和两个适配器。当然，网络中的每个适配器都有自己的MAC地址。
**在报文中，IP地址是目的主机的IP地址，但MAC地址并不是，是下一个跳转路由器接口的MAC地址，而每到一个路由器，都会对MAC地址进行更新，直到最后一个路由器转接点时，将MAC地址更新为目的主机的MAC地址。所有的MAC地址都是通过ABP获得的**。

# 2、以太网中集线器、交换机、路由器：

集线器：是一种物理层设备，它作用于各个比特而不是作用于帧。当一个比特到达一个接口时，重新生成该比特，将其 能量强度 放大后向其他所有接口传输出去。（若同时从两个不同的接口接收到帧，将出现一次碰撞，生成该帧的节点必须重新传输该帧）
交换机：是第二层的分组交换机，使用MAC地址转发分组的存储转发分组交换机。是即插即用的；交换机对于广播风暴不提供任何保护措施，即如果某主机出了故障并传输出没完没了的以太网广播帧，该交换机将转发所有这些帧，是以太网崩溃。
路由器：第三层的分组交换机，使用网络层IP地址转发分组的存储转发分组交换机。不是即插即用的；对第二层的广播风暴提供防火墙保护。
